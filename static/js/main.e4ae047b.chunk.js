(this["webpackJsonpscanner-test"]=this["webpackJsonpscanner-test"]||[]).push([[0],{21:function(e,n,t){"use strict";t.r(n);var c,r,o,i,a=t(0),s=t.n(a),d=t(9),u=t.n(d),l=t(2),f=t(3),h=t(10),g=t.n(h),b=t(4),j=t(1),w=b.a.div(c||(c=Object(f.a)(["\n  height: 100%;\n  overflow: hidden;\n"]))),v=b.a.div(r||(r=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),p=b.a.button(o||(o=Object(f.a)(["\n  margin: 20px;\n  flex-grow: 1;\n  height: 30px;\n  background-color: black;\n  color: white;\n  border-radius: 15px;\n"]))),x=b.a.div(i||(i=Object(f.a)(["\n  position: fixed;\n  bottom: 10px;\n  top: calc(100% - 100px);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),O=function(){return null};var m=function(){var e=s.a.useRef(),n=s.a.useState(""),t=Object(l.a)(n,2),c=t[0],r=t[1],o=s.a.useState(),i=Object(l.a)(o,2),a=i[0],d=i[1];s.a.useEffect((function(){var e=new Worker("/worker.js");return d(e),function(){e.terminate()}}),[]),s.a.useEffect((function(){return a&&(a.onmessage=function(e){k.current=!1,console.log("worker response"),e.data.success&&(r(e.data.barcode),I(!1),S("Scan"),console.log("Barcode: ".concat(e.data.barcode)))}),function(){a&&(a.onmessage=O)}}),[a]);var u=function(){var e=s.a.useState({width:void 0,height:void 0}),n=Object(l.a)(e,2),t=n[0],c=n[1];return s.a.useEffect((function(){function e(){c({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),f=u.height<=u.width?u.width/u.height:u.height/u.width,h=s.a.useState("Scan"),b=Object(l.a)(h,2),m=b[0],S=b[1],k=s.a.useRef(!1),E=s.a.useState(!1),M=Object(l.a)(E,2),y=M[0],I=M[1];return s.a.useEffect((function(){if(a&&!c&&y){console.log({barcodeWorker:a,barcode:c,scanning:y});var n=setInterval((function(){console.log(k.current),k.current||(k.current=!0,S("Scanning"),createImageBitmap(e.current.video).then((function(e){return a.postMessage(e)})))}),300);return function(){console.log("Clearing interval ".concat(n)),clearInterval(n)}}}),[c,a,y]),Object(j.jsxs)(w,{children:[Object(j.jsx)(g.a,{audio:!1,width:u.width,height:u.height,videoConstraints:{facingMode:"environment",aspectRatio:f,resizeMode:"crop-and-scale"},ref:e,onUserMedia:function(e){console.log("onUserMedia")}}),Object(j.jsx)(x,{children:Object(j.jsx)(v,{children:Object(j.jsx)(p,{onClick:function(){I(!y),S("Scan"===m?"Scanning":"Scan")},children:m})})})]})};u.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.e4ae047b.chunk.js.map